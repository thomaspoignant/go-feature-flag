---
sidebar_position: 80
description: "Flag sets are a powerful feature in GO Feature Flag that allows you to organize your feature flags into separate groups, each with its own configuration, API keys, retrievers, exporters, and notifiers."
---

# ‚õ≥Ô∏è Flag Set

## Overview

A flag set is a collection of related flags. This grouping helps organize feature flags based on their intended use, facilitating easier management and deployment.

## About flag sets

Flag sets are a powerful feature in GO Feature Flag that allows you to organize your feature flags into separate groups, each with its own configuration, API keys, `retrievers`, `exporters`, and `notifiers`.

This enables better organization and isolation of flags based on teams, environments, or applications.

### Key characteristics of flag sets:

- üîß **Independent configurations**: Each flag set can have its own retrievers, exporters, and notifiers
- üîë **API key-based access**: Accessing to a flag set requires an API key, you can have multiple API keys for a flag set, we are using the API key to route the request to the appropriate flag set.
- üè∞ **Complete isolation**: There is no inheritance between flag sets - each is completely independent.

## When to use flag sets ?

Flag sets are particularly useful in the following scenarios:

### üè∞ **Flags Isolation**

When different teams need to manage their own flags independently.

- Frontend team manages UI-related feature flags
- Backend team manages API-related feature flags

Flag sets are particularly useful when you have different teams or applications that need to manage their own flags independently.
Note that 2 teams can have identical flag name with different purposes without any collision if they are in different flag sets.

### üññ **Environment Separation**

When you need separate flags for different environments:

- Development environment with experimental flags
- Staging environment with pre-production flags
- Production environment with stable flags

### üèòÔ∏è **Multi-tenant Applications**

When serving multiple customers or organizations:

- Each customer has their own flag set
- Isolated flag configurations per customer
- Separate evaluation data tracking


:::info
If none of these scenarios apply to you, we recommend you to not use flag sets to keep it simple.
:::

## How to access to a specific flag set ?

To access a specific flag set, you need to include an API key in your evaluation requests. The relay proxy uses this API key to route your request to the appropriate flag set.

### **Using API Keys**

When using flag sets, authentication is required for all evaluation requests.  
To do so, you need to initialize your providers with the correct API key.

The API key is what we use to route the request to the appropriate flag set, so it is important to use the correct API key for the flag set you want to access.

### **How the routing works**

1. **Extract API key**: The relay proxy extracts the API key from the `X-API-Key` or `Authorization` header
2. **Find flag set**: It looks up which flag set is associated with that API key
3. **Route request**: The evaluation request is routed to that specific flag set
4. **Return result**: The evaluation result comes from that flag set's flags

## Runtime API key updates

GO Feature Flag supports **updating API keys at runtime** without requiring a restart of the relay proxy.  
This feature works in both **default mode** and **flagset mode**, allowing you to rotate API keys or add new keys while the service is running.

:::info
**Default mode**: In default mode, you can update `authorizedKeys.evaluation` and `authorizedKeys.admin` at runtime.  
**Flagset mode**: In flagset mode, you can update API keys for each flag set individually.  
See the [configuration documentation](../relay-proxy/configure-relay-proxy#runtime-configuration-updates) for more details.
:::

### How it works

When the relay proxy configuration file changes, the relay proxy will automatically detect the change and update the API keys associated with each flag set.

This includes:

- **Adding new API keys** to an existing flag set
- **Removing API keys** from a flag set
- **Replacing API keys** with new ones

### Requirements

To enable runtime API key updates, your flag set **must have a `name` configured**:

```yaml title="goff-proxy.yaml"
flagSets:
  - name: team-a # ‚úÖ This flagset supports runtime API key updates
    apiKeys:
      - "team-a-api-key"
    retrievers:
      - kind: file
        path: /flags/team-a-flags.yaml
```

:::warning
If you don't provide a `name` for your flag set (or use `default` as the name), the relay proxy will generate a random UUID as the name.  
In this case, **runtime API key updates will not be possible**, as the relay proxy cannot identify which flag set to update.

```yaml title="goff-proxy.yaml"
flagSets:
  - apiKeys: # ‚ö†Ô∏è No name provided - runtime API key updates won't work
      - "my-api-key"
    retrievers:
      - kind: file
        path: /flags/my-flags.yaml
```
:::

### What happens during an update

When API keys are updated:

1. The relay proxy detects the configuration change
2. It validates the new configuration _(if the configuration is invalid, the relay proxy will not apply the changes)_
3. It updates the internal API key to flag set mapping
4. New requests immediately use the updated routing

:::info
During the update, there is no downtime. Requests continue to be processed normally, and the new API key configuration takes effect immediately after the update is taking into account.
:::
