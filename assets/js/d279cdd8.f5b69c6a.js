"use strict";(globalThis.webpackChunkgo_feature_flag_website=globalThis.webpackChunkgo_feature_flag_website||[]).push([[84676],{11099:(e,a,n)=>{n.d(a,{f:()=>r,q:()=>s});n(96540);var t=n(74848);const r=()=>(0,t.jsx)("i",{className:"fa-solid fa-xmark text-red-500"}),s=()=>(0,t.jsx)("i",{className:"fa-solid fa-check text-green-500"})},28453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>o});var t=n(96540);const r={},s=t.createContext(r);function i(e){const a=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(s.Provider,{value:a},e.children)}},50165:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"relay-proxy/deployment/aws-lambda","title":"AWS Lambda","description":"How to deploy GO Feature Flag relay proxy inside a AWS Lambda.","source":"@site/versioned_docs/version-v1.50.1/relay-proxy/deployment/aws-lambda.mdx","sourceDirName":"relay-proxy/deployment","slug":"/relay-proxy/deployment/aws-lambda","permalink":"/docs/v1.50.1/relay-proxy/deployment/aws-lambda","draft":false,"unlisted":false,"editUrl":"https://github.com/thomaspoignant/go-feature-flag/tree/main/website/versioned_docs/version-v1.50.1/relay-proxy/deployment/aws-lambda.mdx","tags":[],"version":"v1.50.1","sidebarPosition":20,"frontMatter":{"sidebar_position":20,"description":"How to deploy GO Feature Flag relay proxy inside a AWS Lambda."},"sidebar":"tutorialSidebar","previous":{"title":"Helm","permalink":"/docs/v1.50.1/relay-proxy/deployment/helm"},"next":{"title":"\ud83c\udf10 API endpoints","permalink":"/docs/v1.50.1/relay-proxy/relay_proxy_endpoints"}}');var r=n(74848),s=n(28453),i=n(11099);const o={sidebar_position:20,description:"How to deploy GO Feature Flag relay proxy inside a AWS Lambda."},d="AWS Lambda",l={},c=[{value:"Overview",id:"overview",level:2},{value:"How to start the relay proxy as an AWS Lambda function",id:"how-to-start-the-relay-proxy-as-an-aws-lambda-function",level:2},{value:"API Gateway Non-Root Path Configuration",id:"api-gateway-non-root-path-configuration",level:2},{value:"Lambda Binary",id:"lambda-binary",level:2}];function h(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"aws-lambda",children:"AWS Lambda"})}),"\n",(0,r.jsx)(a.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(a.p,{children:"The GO Feature Flag relay proxy can easily be launched as an AWS Lambda function."}),"\n",(0,r.jsx)(a.h2,{id:"how-to-start-the-relay-proxy-as-an-aws-lambda-function",children:"How to start the relay proxy as an AWS Lambda function"}),"\n",(0,r.jsxs)(a.p,{children:["To start GO Feature Flag relay-proxy as a lambda you have to set the option ",(0,r.jsx)(a.code,{children:"startAsAwsLambda"})," in your configuration file to ",(0,r.jsx)(a.code,{children:"true"}),",\nand you have to set which lambda handler you want to use, by setting the option ",(0,r.jsx)(a.code,{children:"awsLambdaAdapter"}),"."]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-yaml",metastring:'title="goff-proxy.yaml"',children:"# ...\nstartAsAwsLambda: true\nawsLambdaAdapter: APIGatewayV2\n# ...\n"})}),"\n",(0,r.jsx)(a.h2,{id:"api-gateway-non-root-path-configuration",children:"API Gateway Non-Root Path Configuration"}),"\n",(0,r.jsxs)(a.p,{children:["If you're deploying your Lambda function behind AWS API Gateway with a non-root path (e.g., ",(0,r.jsx)(a.code,{children:"/api/feature-flags/{proxy+}"}),"), you'll need to configure the base path to ensure proper request routing:"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-yaml",metastring:'title="goff-proxy.yaml"',children:'# ...\nstartAsAwsLambda: true\nawsLambdaAdapter: APIGatewayV2\nawsApiGatewayBasePath: "/api/feature-flags"  # Strip this prefix from all requests\n# ...\n'})}),"\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.strong,{children:"Example scenario:"})}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:["Your API Gateway route: ",(0,r.jsx)(a.code,{children:"/api/feature-flags/{proxy+}"})]}),"\n",(0,r.jsxs)(a.li,{children:["Client request: ",(0,r.jsx)(a.code,{children:"https://your-api.amazonaws.com/api/feature-flags/health"})]}),"\n",(0,r.jsxs)(a.li,{children:["With ",(0,r.jsx)(a.code,{children:'awsApiGatewayBasePath: "/api/feature-flags"'})," configured, the request will be processed as ",(0,r.jsx)(a.code,{children:"/health"})]}),"\n"]}),"\n",(0,r.jsx)(a.p,{children:"This configuration is essential when using API Gateway stages or organizing your APIs with path-based routing."}),"\n",(0,r.jsxs)(a.table,{children:[(0,r.jsx)(a.thead,{children:(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.th,{children:"Field name"}),(0,r.jsx)(a.th,{style:{textAlign:"center"},children:"Mandatory"}),(0,r.jsx)(a.th,{children:"Type"}),(0,r.jsx)(a.th,{children:"Default"}),(0,r.jsx)(a.th,{children:"Description"})]})}),(0,r.jsxs)(a.tbody,{children:[(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.td,{children:(0,r.jsx)(a.strong,{children:"startAsAwsLambda"})}),(0,r.jsx)(a.td,{style:{textAlign:"center"},children:(0,r.jsx)(i.q,{})}),(0,r.jsx)(a.td,{children:(0,r.jsx)(a.code,{children:"boolean"})}),(0,r.jsx)(a.td,{children:(0,r.jsx)(a.strong,{children:(0,r.jsx)(a.code,{children:"false"})})}),(0,r.jsxs)(a.td,{children:["Set to ",(0,r.jsx)(a.code,{children:"true"})," if you want to start the GO Feature Flag relay proxy as an AWS Lambda"]})]}),(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.td,{children:(0,r.jsx)(a.strong,{children:"awsLambdaAdapter"})}),(0,r.jsx)(a.td,{style:{textAlign:"center"},children:(0,r.jsx)(i.f,{})}),(0,r.jsx)(a.td,{children:(0,r.jsx)(a.code,{children:"string"})}),(0,r.jsx)(a.td,{children:(0,r.jsx)(a.strong,{children:(0,r.jsx)(a.code,{children:"APIGatewayV2"})})}),(0,r.jsxs)(a.td,{children:[(0,r.jsxs)("p",{children:["This param is used only if ",(0,r.jsx)(a.code,{children:"startAsAwsLambda"})," is true."]}),(0,r.jsx)("p",{children:"This parameter allow you to decide which type of AWS lambda handler you wan to use."}),(0,r.jsxs)("p",{children:["Accepted values are:",(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,r.jsx)(a.code,{children:"APIGatewayV2"})}),(0,r.jsx)("li",{children:(0,r.jsx)(a.code,{children:"APIGatewayV1"})}),(0,r.jsx)("li",{children:(0,r.jsx)(a.code,{children:"ALB"})})]})]})]})]}),(0,r.jsxs)(a.tr,{children:[(0,r.jsx)(a.td,{children:(0,r.jsx)(a.strong,{children:"awsApiGatewayBasePath"})}),(0,r.jsx)(a.td,{style:{textAlign:"center"},children:(0,r.jsx)(i.f,{})}),(0,r.jsx)(a.td,{children:(0,r.jsx)(a.code,{children:"string"})}),(0,r.jsx)(a.td,{children:(0,r.jsx)(a.strong,{children:"none"})}),(0,r.jsxs)(a.td,{children:[(0,r.jsxs)("p",{children:["This param is used only if ",(0,r.jsx)(a.code,{children:"startAsAwsLambda"})," is true."]}),(0,r.jsx)("p",{children:"Specifies the base path prefix for AWS API Gateway deployments when using non-root routes. The relay proxy will strip this base path from incoming requests before processing them."}),(0,r.jsxs)("p",{children:["Useful when deploying behind paths like ",(0,r.jsx)(a.code,{children:"/api"})," or ",(0,r.jsx)(a.code,{children:"/dev/feature-flags"}),"."]})]})]})]})]}),"\n",(0,r.jsx)(a.p,{children:"Once you've updated your configuration file, you can deploy your function in AWS and configure it to be accessible\nvia HTTP. This can be achieved by creating an API Gateway or an Application Load Balancer (ALB) and linking it to\nyour Lambda function."}),"\n",(0,r.jsx)(a.p,{children:"By configuring your GO Feature Flag relay proxy to run as an AWS Lambda function, you can take advantage of many\nbenefits of serverless computing, including automatic scaling, reduced infrastructure costs, and simplified\ndeployment and management."}),"\n",(0,r.jsx)(a.h2,{id:"lambda-binary",children:"Lambda Binary"}),"\n",(0,r.jsx)(a.p,{children:"As part of our release process, we are building an archive ready to be deployed as AWS lambda."}),"\n",(0,r.jsxs)(a.p,{children:["You can find it in the ",(0,r.jsx)(a.a,{href:"https://github.com/thomaspoignant/go-feature-flag/releases",children:"GitHub release page"}),",and you can use the assets named ",(0,r.jsx)(a.code,{children:"go-feature-flag-aws-lambda_<version>.zip"}),"."]})]})}function p(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);