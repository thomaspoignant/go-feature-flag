"use strict";(globalThis.webpackChunkgo_feature_flag_website=globalThis.webpackChunkgo_feature_flag_website||[]).push([[48330],{28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var a=t(96540);const i={},l=a.createContext(i);function s(e){const n=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(l.Provider,{value:n},e.children)}},77410:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"concepts/flag-evaluation","title":"\ud83d\udea5 Flag Evaluation","description":"Flag evaluation dynamically determines a feature flag\'s state at runtime based on context and targeting rules.","source":"@site/versioned_docs/version-v1.48.0/concepts/flag-evaluation.md","sourceDirName":"concepts","slug":"/concepts/flag-evaluation","permalink":"/docs/v1.48.0/concepts/flag-evaluation","draft":false,"unlisted":false,"editUrl":"https://github.com/thomaspoignant/go-feature-flag/tree/main/website/versioned_docs/version-v1.48.0/concepts/flag-evaluation.md","tags":[],"version":"v1.48.0","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"description":"Flag evaluation dynamically determines a feature flag\'s state at runtime based on context and targeting rules."},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udca1 Concepts"},"next":{"title":"\ud83d\udd0e Evaluation Context","permalink":"/docs/v1.48.0/concepts/evaluation-context"}}');var i=t(74848),l=t(28453);const s={sidebar_position:10,description:"Flag evaluation dynamically determines a feature flag's state at runtime based on context and targeting rules."},r="\ud83d\udea5 Flag Evaluation",o={},c=[{value:"Overview",id:"overview",level:2},{value:"What Happens During Evaluation?",id:"what-happens-during-evaluation",level:2},{value:"Supported type of flags",id:"supported-type-of-flags",level:2},{value:"Example",id:"example",level:2},{value:"Basic evaluation with GO Feature Flag",id:"basic-evaluation-with-go-feature-flag",level:2},{value:"Benefits of Dynamic Evaluation",id:"benefits-of-dynamic-evaluation",level:2}];function u(e){const n={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"-flag-evaluation",children:"\ud83d\udea5 Flag Evaluation"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["In a feature flag system, flag evaluation is the process of determining the current state ",(0,i.jsx)(n.em,{children:"(which variant to use)"})," of a feature flag for a given ",(0,i.jsx)(n.a,{href:"/docs/v1.48.0/concepts/evaluation-context",children:"evaluation context"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"This process happens at runtime, allowing you to dynamically control the behavior of your application without redeploying code."}),"\n",(0,i.jsx)(n.h2,{id:"what-happens-during-evaluation",children:"What Happens During Evaluation?"}),"\n",(0,i.jsx)(n.p,{children:"The evaluation process typically involves these steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Retrieving the Flag Configuration:"})," The system fetches the configuration for the specific flag being evaluated. This configuration includes information such as the flag's default value, targeting rules, and any other relevant settings."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Contextual Input:"})," The evaluation receives context about the current request or user. This context can include information like:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"A targeting key"}),"\n",(0,i.jsx)(n.li,{children:"Device type"}),"\n",(0,i.jsx)(n.li,{children:"Location"}),"\n",(0,i.jsx)(n.li,{children:"Custom attributes"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rule Evaluation:"})," The system evaluates the targeting rules defined for the flag against the provided context. These rules determine which users or requests should see the feature enabled (or a specific variant). Common targeting strategies include:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Percentage rollout:"})," Enable the feature for a percentage of users ",(0,i.jsx)(n.em,{children:"(e.g., 50%)"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User targeting:"})," Enable the feature for specific users."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Attribute-based targeting:"})," Enable the feature based on user attributes ",(0,i.jsx)(n.em,{children:'(e.g., users with a "premium" subscription)'}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Returning the Flag Value:"})," Based on the rule evaluation, the system returns the appropriate value for the flag (e.g., ",(0,i.jsx)(n.code,{children:"true"}),", ",(0,i.jsx)(n.code,{children:"false"}),", or a variant value like ",(0,i.jsx)(n.code,{children:'"variantA"'}),")."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"supported-type-of-flags",children:"Supported type of flags"}),"\n",(0,i.jsx)(n.p,{children:"GO Feature Flag supports a variety of flag types, including:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Boolean"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"String"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Integer"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Double"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Object"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For each flag type, the SDKs are providing specific APIs to be able to retrieve your flag in the right type inside your code."}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsxs)(n.p,{children:["Let's say you have a feature flag called ",(0,i.jsx)(n.code,{children:"new_checkout_flow"})," with the following configuration:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="flags.goff.yaml"',children:'new_checkout_flow:\n  variations:\n    enabled: true\n    disabled: false\n  targeting:\n    - query: user_segment eq "early_adopters"\n      variation: enabled\n  defaultRule:\n    percentage:\n      enabled: 20\n      disabled: 80\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If a user belongs to the ",(0,i.jsx)(n.code,{children:"early_adopters"})," segment, the flag evaluation will return ",(0,i.jsx)(n.code,{children:"true"}),".",(0,i.jsx)(n.br,{}),"\n","If a user does not belong to that segment, there's a ",(0,i.jsx)(n.strong,{children:"20% chance"})," the flag will return ",(0,i.jsx)(n.code,{children:"true"})," due to the percentage rollout rule. Otherwise, the flag will return the ",(0,i.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"basic-evaluation-with-go-feature-flag",children:"Basic evaluation with GO Feature Flag"}),"\n",(0,i.jsxs)(n.p,{children:["After setting up your flag configuration, you can evaluate the flag in your application code.\nFor this example ",(0,i.jsx)(n.em,{children:"(in JS)"}),", we'll use the OpenFeature SDKs, with a GO Feature Flag provider:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'const evaluationContext = {\n  targetingKey: "<my-key>",\n   "user_segment": "early_adopters",\n};\nconst defaultValue = false;\n\n// get a boolean value\nconst boolValue = await client.getBooleanValue(\n  \'new_checkout_flow\',\n  defaultValue,\n  evaluationContext);\n'})}),"\n",(0,i.jsxs)(n.p,{children:["As you can see, the evaluation context API takes 3 parameters ",(0,i.jsx)(n.em,{children:"(this is true in most languages)"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The name of the flag to evaluate."}),"\n",(0,i.jsx)(n.li,{children:"A default value to return if the flag is not found or the evaluation fails. The evaluation API will always return a value, even if there is an error."}),"\n",(0,i.jsxs)(n.li,{children:["An evaluation context giving information about the current user or request ",(0,i.jsxs)(n.em,{children:["(",(0,i.jsx)(n.a,{href:"/docs/v1.48.0/concepts/evaluation-context",children:"more information about evaluation context"}),")"]}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You can also see that we explicitely asking for a boolean value because ",(0,i.jsx)(n.code,{children:"new_checkout_flow"})," is a boolean flag."]}),"\n",(0,i.jsx)(n.h2,{id:"benefits-of-dynamic-evaluation",children:"Benefits of Dynamic Evaluation"}),"\n",(0,i.jsx)(n.p,{children:"Dynamic flag evaluation provides several advantages:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Instant control:"})," Change the state of features without deploying new code."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"A/B testing:"})," Run experiments and gather data on different feature variations."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Gradual rollouts:"})," Release features to a small group of users before wider deployment."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kill switches:"})," Quickly disable problematic features in production."]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}}}]);