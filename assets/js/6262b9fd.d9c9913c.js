"use strict";(self.webpackChunkgo_feature_flag_website=self.webpackChunkgo_feature_flag_website||[]).push([[45298],{15253:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"concepts/evaluation-context","title":"\ud83d\udd0e Evaluation Context","description":"An evaluation context in a feature flagging system is crucial for determining the output of a feature flag evaluation. It\'s a collection of pertinent data about the conditions under which the evaluation is being made.","source":"@site/versioned_docs/version-v1.45.0/concepts/evaluation-context.md","sourceDirName":"concepts","slug":"/concepts/evaluation-context","permalink":"/docs/v1.45.0/concepts/evaluation-context","draft":false,"unlisted":false,"editUrl":"https://github.com/thomaspoignant/go-feature-flag/tree/main/website/versioned_docs/version-v1.45.0/concepts/evaluation-context.md","tags":[],"version":"v1.45.0","sidebarPosition":20,"frontMatter":{"sidebar_position":20,"description":"An evaluation context in a feature flagging system is crucial for determining the output of a feature flag evaluation. It\'s a collection of pertinent data about the conditions under which the evaluation is being made."},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udea5 Flag Evaluation","permalink":"/docs/v1.45.0/concepts/flag-evaluation"},"next":{"title":"\ud83e\udde9 SDK paradigms","permalink":"/docs/v1.45.0/concepts/sdk-paradigms"}}');var a=n(74848),s=n(28453);const o={sidebar_position:20,description:"An evaluation context in a feature flagging system is crucial for determining the output of a feature flag evaluation. It's a collection of pertinent data about the conditions under which the evaluation is being made."},r="\ud83d\udd0e Evaluation Context",l={},c=[{value:"Overview",id:"overview",level:2},{value:"About contexts",id:"about-contexts",level:2},{value:"Example context: Mike Wazowski at Monsters, Inc.",id:"example-context-mike-wazowski-at-monsters-inc",level:2},{value:"Targeting Key",id:"targeting-key",level:2},{value:"Reserved properties in the evaluation context",id:"reserved-properties-in-the-evaluation-context",level:2}];function d(e){const t={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"-evaluation-context",children:"\ud83d\udd0e Evaluation Context"})}),"\n",(0,a.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(t.p,{children:"All GO Feature Flag SDKs use an evaluation context to determine which variation of a feature flag to serve."}),"\n",(0,a.jsx)(t.p,{children:"An evaluation context in a feature flagging system is crucial for determining the output of a feature flag evaluation."}),"\n",(0,a.jsxs)(t.p,{children:["It's a collection of pertinent data about the conditions under which the evaluation is being made.\nhis data can be supplied through a mix of static information ",(0,a.jsx)(t.em,{children:"(server name, IP, etc ...)"})," and dynamic inputs\n",(0,a.jsx)(t.em,{children:"(information about the user performing the action, etc ...)"}),", along with state information that is implicitly carried\nthrough the execution of the program."]}),"\n",(0,a.jsx)(t.h2,{id:"about-contexts",children:"About contexts"}),"\n",(0,a.jsx)(t.p,{children:"GO Feature Flag evaluation contexts are data objects representing users, devices, organizations, and other entities that are used to determine which variation of a feature flag to serve."}),"\n",(0,a.jsxs)(t.p,{children:["The context is used to evaluate the ",(0,a.jsx)(t.a,{href:"/docs/v1.45.0/configure_flag/target-with-flags",children:"targeting queries"})," and determine which variation of a feature flag to serve to a user."]}),"\n",(0,a.jsxs)(t.admonition,{type:"info",children:[(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Only the evaluation context attributes you provide are available for targeting queries."})}),(0,a.jsx)(t.p,{children:"If you want to use a specific attribute in your targeting queries, you must include it in the evaluation context.\nIf not present the query will not apply."})]}),"\n",(0,a.jsx)(t.h2,{id:"example-context-mike-wazowski-at-monsters-inc",children:"Example context: Mike Wazowski at Monsters, Inc."}),"\n",(0,a.jsxs)(t.p,{children:["As an example, let's assume Mike Wazowski is one of your end users. He is a scare assistant who works on the scare floor at Monsters, Inc with James P. Sullivan.",(0,a.jsx)(t.br,{}),"\n","Mike has two mobile devices, an Android phone and an iPad tablet. Mike uses your application on both devices as part of his work."]}),"\n",(0,a.jsx)(t.p,{children:"Given this information, you may know the following things about Mike Wazowski:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["his name, email and job title ",(0,a.jsx)(t.em,{children:'("Scare assistant")'})]}),"\n",(0,a.jsxs)(t.li,{children:["his employee ID ",(0,a.jsx)(t.em,{children:"(used for the targetingKey)"})]}),"\n",(0,a.jsxs)(t.li,{children:["his work station position ",(0,a.jsx)(t.em,{children:'("scare floor")'})]}),"\n",(0,a.jsxs)(t.li,{children:["his organization's name ",(0,a.jsx)(t.em,{children:'("Monsters, Inc."),'})]}),"\n",(0,a.jsxs)(t.li,{children:["his device's type ",(0,a.jsx)(t.em,{children:'("iPad")'})]}),"\n",(0,a.jsxs)(t.li,{children:["his coworker's name ",(0,a.jsx)(t.em,{children:'("James P. Sullivan")'})]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Here is an example of what the data structure for Mike Wazowski evaluation context object might look like:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",metastring:'title="evaluation context"',children:'{\n  "targetingKey": "34c7f8ab-6d14-4aa6-a77f-effc6245da6f",\n  "firstname": "Mike",\n  "lastname": "Wazowski",\n  "email": "mike.wazowski@monster.inc",\n  "organization": "Monsters, Inc.",\n  "jobFunction": "Scare assistant",\n  "location": "scare floor",\n  "coworker": "James P. Sullivan",\n  "device": "iPad"\n}\n'})}),"\n",(0,a.jsx)(t.h2,{id:"targeting-key",children:"Targeting Key"}),"\n",(0,a.jsx)(t.admonition,{type:"info",children:(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Targeting Key is a mandatory field in GO Feature Flag."})})}),"\n",(0,a.jsxs)(t.p,{children:["A ",(0,a.jsx)(t.strong,{children:"targeting key"})," is a unique identifier that represents the context of the evaluation ",(0,a.jsx)(t.em,{children:"(email, session id, a fingerprint or anything that is consistent)"}),",\nensuring that they are consistently exposed to the same variation of a feature, even across multiple visits or sessions."]}),"\n",(0,a.jsxs)(t.p,{children:["The targeting key is used to ensure that a user consistently receives the same variation of a feature flag over time.",(0,a.jsx)(t.br,{}),"\n","For instance, ",(0,a.jsx)(t.strong,{children:"GO Feature Flag"})," ensures that in cases where a feature is being rolled out to a percentage of users, based on the targeting key, they will see the same variation each time they encounter the feature flag."]}),"\n",(0,a.jsx)(t.h2,{id:"reserved-properties-in-the-evaluation-context",children:"Reserved properties in the evaluation context"}),"\n",(0,a.jsx)(t.admonition,{type:"danger",children:(0,a.jsxs)(t.p,{children:["If you put a key named ",(0,a.jsx)(t.code,{children:"gofeatureflag"})," in your evaluation context, it may break internal features of GO Feature Flag.\nThis property name is reserved for internal use."]})}),"\n",(0,a.jsxs)(t.p,{children:["When you create an evaluation context some fields are reserved for GO Feature Flag.",(0,a.jsx)(t.br,{}),"\n","Those fields are used by GO Feature Flag directly, you can use them as will in your targeting queries, but you should be aware that they are used internally for GO Feature Flag."]}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Field"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"gofeatureflag.currentDateTime"})}),(0,a.jsxs)(t.td,{children:["If this property is set, we will use this date as base for all the rollout strategies which implies dates ",(0,a.jsx)(t.em,{children:"(experimentation, progressive and scheduled)"}),".",(0,a.jsx)("br",{}),(0,a.jsx)(t.strong,{children:"Format:"})," Date following the RF3339 format."]})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"gofeatureflag.flagList"})}),(0,a.jsxs)(t.td,{children:["If this property is set, in the bulk evaluation mode (for the client SDK) we will only evaluate the flags in this list.",(0,a.jsx)("br",{}),"If empty or not set the default behavior is too evaluate all the flags.",(0,a.jsx)("br",{}),(0,a.jsx)(t.strong,{children:"Format:"})," []string"]})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"gofeatureflag.exporterMetadata"})}),(0,a.jsxs)(t.td,{children:["If this property is set, we will add all the fields in the feature event send to the provider.",(0,a.jsx)("br",{}),(0,a.jsx)(t.strong,{children:"Format:"})," map[string]string|number|bool"]})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var i=n(96540);const a={},s=i.createContext(a);function o(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);