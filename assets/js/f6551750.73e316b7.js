"use strict";(globalThis.webpackChunkgo_feature_flag_website=globalThis.webpackChunkgo_feature_flag_website||[]).push([[97102],{28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>o});var r=n(96540);const i={},a=r.createContext(i);function s(e){const t=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(a.Provider,{value:t},e.children)}},94027:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"tracking/tracking-api","title":"\ud83c\udfaf Tracking API","description":"How to record custom actions and outcomes with the OpenFeature Tracking API for experimentation and analytics.","source":"@site/docs/tracking/tracking-api.mdx","sourceDirName":"tracking","slug":"/tracking/tracking-api","permalink":"/docs/next/tracking/tracking-api","draft":false,"unlisted":false,"editUrl":"https://github.com/thomaspoignant/go-feature-flag/tree/main/website/docs/tracking/tracking-api.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"description":"How to record custom actions and outcomes with the OpenFeature Tracking API for experimentation and analytics."},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udcc8 Flag usage tracking","permalink":"/docs/next/tracking/flag-usage-tracking"},"next":{"title":"\ud83d\udcbd Store your flags\u2019 configuration","permalink":"/docs/next/integrations/store-flags-configuration/"}}');var i=n(74848),a=n(28453);const s={sidebar_position:2,description:"How to record custom actions and outcomes with the OpenFeature Tracking API for experimentation and analytics."},o="\ud83c\udfaf Tracking API",c={},d=[{value:"What it is",id:"what-it-is",level:2},{value:"Why use it",id:"why-use-it",level:2},{value:"Concepts",id:"concepts",level:2},{value:"How it works",id:"how-it-works",level:2},{value:"With the relay-proxy and SDKs",id:"with-the-relay-proxy-and-sdks",level:3},{value:"Summary",id:"summary",level:3},{value:"What you need to do",id:"what-you-need-to-do",level:2},{value:"Event format",id:"event-format",level:2},{value:"Example",id:"example",level:3}];function l(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"-tracking-api",children:"\ud83c\udfaf Tracking API"})}),"\n",(0,i.jsx)(t.h2,{id:"what-it-is",children:"What it is"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.strong,{children:"OpenFeature Tracking API"}),' lets you record custom actions or outcomes in your app (e.g. "user visited promo page," "user completed checkout with amount 99.99") and associate them with the same user or context you use for flag evaluation.\nThis follows the ',(0,i.jsx)(t.a,{href:"https://openfeature.dev/specification/sections/tracking/",children:"OpenFeature Tracking specification"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["You call something like ",(0,i.jsx)(t.code,{children:'client.track("event-name", context, details)'})," when the action happens in your application."]}),"\n",(0,i.jsx)(t.h2,{id:"why-use-it",children:"Why use it"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Measure the impact of flags"}),': For example, did users who saw the new button (flag on) actually click it more? By recording both "which variation they saw" (',(0,i.jsx)(t.a,{href:"./flag-usage-tracking",children:"flag usage"}),') and "what they did" (tracking events), you can analyze conversion, revenue, or any metric per variation.']}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Experimentation"}),': Tracking is the "outcome" side of experimentation\u2014you need both exposures and outcomes to run A/B tests or analyze feature impact.']}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"concepts",children:"Concepts"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Event name"}),": A string you choose (e.g. ",(0,i.jsx)(t.code,{children:'"clicked-checkout"'}),", ",(0,i.jsx)(t.code,{children:'"visited-promo-page"'}),")."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Context"}),": The same evaluation context (user key, attributes) you use for flag evaluation, so tracking events can be joined with flag exposures in your analytics."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Details"}),": Optional extra data\u2014for example a numeric ",(0,i.jsx)(t.strong,{children:"value"})," (e.g. order total) and/or custom fields (e.g. currency, item IDs). Useful for revenue, scores, or any structured payload your analytics expect."]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,i.jsx)(t.h3,{id:"with-the-relay-proxy-and-sdks",children:"With the relay-proxy and SDKs"}),"\n",(0,i.jsx)(t.p,{children:"Your app uses an OpenFeature client (e.g. Kotlin, JavaScript)."}),"\n",(0,i.jsxs)(t.p,{children:["When you call ",(0,i.jsx)(t.code,{children:"client.track(...)"}),", the provider records the event and later sends it in a batch to the relay's data collector.\nThe relay-proxy then forwards those events to the ",(0,i.jsx)(t.strong,{children:"tracking"})," exporters you configured."]}),"\n",(0,i.jsx)(t.p,{children:"Flow:"}),"\n",(0,i.jsx)(t.mermaid,{value:"sequenceDiagram\n    participant app as App\n    participant sdk as OpenFeature SDK\n    participant p as Go Feature Flag Provider\n    participant rp as RelayProxy\n    participant exp as Exporter\n    app ->> sdk: Track()\n    sdk ->> p:\n    p ->> p: Buffer track events\n    p ->> rp: Send events to the relay-proxy\n    rp --\x3e> p:\n    rp ->> exp: Store events to the Tracking Exporter\n    exp --\x3e> rp:"}),"\n",(0,i.jsxs)(t.p,{children:["The relay-proxy never calls ",(0,i.jsx)(t.code,{children:"track"})," itself; it only receives and forwards tracking events from SDKs."]}),"\n",(0,i.jsx)(t.h3,{id:"summary",children:"Summary"}),"\n",(0,i.jsxs)(t.p,{children:["The Tracking API means: ",(0,i.jsx)(t.em,{children:"record a named action or outcome for this user/context and optional details."})," Events flow from your app (via the SDK) to the relay-proxy, then to the exporters you set up for tracking."]}),"\n",(0,i.jsx)(t.h2,{id:"what-you-need-to-do",children:"What you need to do"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Call the OpenFeature track API"})," where the action or outcome occurs in your application (using the client provided by your OpenFeature SDK)."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Configure at least one exporter for tracking events"}),": Use a new exporter with the option ",(0,i.jsx)(t.code,{children:'eventType: "tracking"'})," set, so the relay-proxy sends these events to that exporter. See ",(0,i.jsx)(t.a,{href:"../integrations/export-evaluation-data",children:"export evaluation data"})," and the relay-proxy configuration for how to add an exporter with ",(0,i.jsx)(t.code,{children:'eventType: "tracking"'}),"."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"You can send tracking and flag-usage events to the same backend by defining two exporter entries (one for feature events, one for tracking events) if your pipeline accepts both."}),"\n",(0,i.jsx)(t.h2,{id:"event-format",children:"Event format"}),"\n",(0,i.jsx)(t.p,{children:"Each tracking event has the following structure when sent to your exporters:"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Field"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"kind"})}),(0,i.jsxs)(t.td,{children:["Always ",(0,i.jsx)(t.code,{children:'"tracking"'})," for custom tracking events."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"contextKind"})}),(0,i.jsxs)(t.td,{children:[(0,i.jsx)(t.code,{children:'"user"'})," for a known user, or ",(0,i.jsx)(t.code,{children:'"anonymousUser"'})," for an anonymous context."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"userKey"})}),(0,i.jsx)(t.td,{children:"The targeting key (user or entity identifier) from the evaluation context."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"creationDate"})}),(0,i.jsx)(t.td,{children:"Unix timestamp (seconds) when the event was recorded."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"key"})}),(0,i.jsxs)(t.td,{children:["The tracking event name you passed (e.g. ",(0,i.jsx)(t.code,{children:'"clicked-checkout"'}),")."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"evaluationContext"})}),(0,i.jsx)(t.td,{children:"The evaluation context (attributes, key) used when tracking, so you can join with flag exposures."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:(0,i.jsx)(t.strong,{children:"trackingEventDetails"})}),(0,i.jsxs)(t.td,{children:["Optional data: a numeric ",(0,i.jsx)(t.strong,{children:"value"})," and/or custom key\u2013value fields. Keys are strings; values can be boolean, string, number, or nested structure, as per the ",(0,i.jsx)(t.a,{href:"https://openfeature.dev/specification/sections/tracking/",children:"OpenFeature Tracking specification"}),"."]})]})]})]}),"\n",(0,i.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,i.jsx)(t.p,{children:"A minimal tracking event in JSON:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  "kind": "tracking",\n  "contextKind": "user",\n  "userKey": "94a25909-20d8-40cc-8500-fee99b569345",\n  "creationDate": 1618909178,\n  "key": "clicked-checkout",\n  "evaluationContext": {\n    "targetingKey": "94a25909-20d8-40cc-8500-fee99b569345",\n    "email": "user@example.com"\n  },\n  "trackingEventDetails": {\n    "value": 99.77,\n    "currencyCode": "USD"\n  }\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["For the exact types and semantics of tracking event details (e.g. ",(0,i.jsx)(t.code,{children:"value"})," and custom fields), see the ",(0,i.jsx)(t.a,{href:"https://openfeature.dev/specification/sections/tracking/",children:"OpenFeature Tracking specification"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);