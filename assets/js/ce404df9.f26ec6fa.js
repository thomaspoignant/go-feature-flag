"use strict";(self.webpackChunkgo_feature_flag_website=self.webpackChunkgo_feature_flag_website||[]).push([[39380],{27859:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>g,frontMatter:()=>l,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"relay-proxy/getting_started","title":"\ud83c\udfc1 Getting started","description":"Getting started with the relay proxy.","source":"@site/docs/relay-proxy/getting_started.md","sourceDirName":"relay-proxy","slug":"/relay-proxy/getting_started","permalink":"/docs/next/relay-proxy/getting_started","draft":false,"unlisted":false,"editUrl":"https://github.com/thomaspoignant/go-feature-flag/tree/main/website/docs/relay-proxy/getting_started.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"description":"Getting started with the relay proxy."},"sidebar":"tutorialSidebar","previous":{"title":"\u2194\ufe0f Relay proxy","permalink":"/docs/next/relay-proxy/"},"next":{"title":"\ud83d\udd27 Configuration","permalink":"/docs/next/relay-proxy/configure-relay-proxy"}}');var r=n(74848),i=n(28453);const l={sidebar_position:10,description:"Getting started with the relay proxy."},o="\ud83c\udfc1 Getting started",s={},c=[{value:"Overview",id:"overview",level:2},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Starting",id:"starting",level:2},{value:"Evaluate a flag",id:"evaluate-a-flag",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"-getting-started",children:"\ud83c\udfc1 Getting started"})}),"\n",(0,r.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.strong,{children:"relay proxy"})," is where the magic happen, it allows to retrieve flags from a remote source and serve them to your applications."]}),"\n",(0,r.jsx)(t.p,{children:"This is the component that will be in charge of serving the flags to the different provider and SDKs of your application."}),"\n",(0,r.jsx)(t.p,{children:"In this page, we will guide you to set up quickly the relay-proxy"}),"\n",(0,r.jsx)(t.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(t.p,{children:"We will use the docker image for this first installation:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"docker pull gofeatureflag/go-feature-flag:latest\n"})}),"\n",(0,r.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(t.p,{children:["Before starting your ",(0,r.jsx)(t.strong,{children:"relay proxy"})," you will need to create a minimal configuration file."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'title="goff-proxy.yaml"',children:"# this is a minimal config containing only where your flag file is located \nretrievers:\n  - kind: github\n    repositorySlug: thomaspoignant/go-feature-flag\n    path: cmd/relayproxy/testdata/dockerhub-example/flags.goff.yaml\n"})}),"\n",(0,r.jsx)(t.h2,{id:"starting",children:"Starting"}),"\n",(0,r.jsxs)(t.p,{children:["After that you can launch the ",(0,r.jsx)(t.strong,{children:"relay proxy"})," by using this command:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"docker run -v $(pwd)/goff-proxy.yaml:/goff/goff-proxy.yaml -p 1031:1031 gofeatureflag/go-feature-flag\n"})}),"\n",(0,r.jsx)(t.p,{children:"What is happening?"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["The ",(0,r.jsx)(t.strong,{children:"relay proxy"})," will read the configuration file and use the github retriever to load the flags from the configuration file."]}),"\n",(0,r.jsx)(t.li,{children:"The relay-proxy is also starting to poll the file regurarly to check if any changes are happening."}),"\n",(0,r.jsx)(t.li,{children:"A set of APIs are available to evaluate the flags"}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"evaluate-a-flag",children:"Evaluate a flag"}),"\n",(0,r.jsx)(t.p,{children:"You can validate that the relay-proxy is working by trying a flag evaluation:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:'curl \'http://localhost:1031/ofrep/v1/evaluate/flags/flag-only-for-admin\' -X POST \\\n  -H \'Content-Type: application/json\' \\\n  --data-raw \'{"context": {"company": "GO Feature Flag", "firstname": "John", "lastname": "Doe", "targetingKey": "4f433951-4c8c-42b3-9f18-8c9a5ed8e9eb"}}\'\n'})}),"\n",(0,r.jsx)(t.p,{children:"You should receive a response like this one:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n    "key": "flag-only-for-admin",\n    "value": false,\n    "reason": "DEFAULT",\n    "variant": "default_var",\n    "metadata": {\n        "gofeatureflag_cacheable": true\n    }\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"\ud83c\udf89 Congrats you have a working relay-proxy locally \ud83c\udf89."}),"\n",(0,r.jsx)(t.p,{children:"Follow the next pages if you want to deploy it in your infrastructure and to have all the options to configure it."})]})}function g(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>o});var a=n(96540);const r={},i=a.createContext(r);function l(e){const t=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);